{% extends 'base.html' %}

{% block title %}
<title>TrixBank | Dashboard</title>
{% endblock title %}

{% block content %}
<main class="w-full h-screen flex">
<div class="w-3/12 h-full px-0 border-r flex flex-col">
    <div class="flex items-center px-4 justify-between py-3 border-b">
        <h1 class="text-2xl font-semibold cursor-pointer font-poppins">TrixBank</h1>
        <button class="btn bg-inherit border-inherit p-2 hover:bg-stone-100 hover:border-inherit px-3 border rounded-md ">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-align-justify"><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
        </button>
    </div>
    <div class="px-3 py-2 flex flex-col justify-between flex-1 transition-all ease-out duration-500 font-poppins">
        <div class="flex flex-col space-y-3">
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                <a href="{% url 'dashboard' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">Dashboard</a>
            </div>
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/deposit/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-circle-arrow-down"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="m8 12 4 4 4-4"/></svg>
                <a href="{% url 'deposit' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">Deposit</a>
            </div>
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/withdraw/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-circle-arrow-down"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="m8 12 4 4 4-4"/></svg>
                
                <a href="{% url 'withdraw' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">Withdraw</a>
            </div>
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/transfer/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-circle-arrow-down"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="m8 12 4 4 4-4"/></svg>
                <a href="{% url 'transfer' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">Transfer</a>
            </div>
            <div class="relative text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/messages/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-bell"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
                <a href="{% url 'notifications' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">Notifications</a>
                {% comment %} <div class="border rounded-full h-4 w-4 flex items-center justify-center text-xs bg-red-400 text-stone-50 border-red-400">
                    1
                </div> {% endcomment %}
            </div>
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if request.path == '/dashboard/history/' %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>
                <a href="{% url 'history' %}" class="text-xs md:text-sm lg:text-lg font-medium underline-offset-4">History</a>
            </div>
        </div>
        <div>
            <div class="text-stone-400 p-2 rounded-lg border-none cursor-pointer select-none hover:text-stone-900 flex items-center space-x-2 {% if '/dashboard/profile/' in request.path  %}text-stone-900{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-5 h-5 lucide-user">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
                </svg>
                <a href="{% url 'profile' %}" class="text-lg font-medium underline-offset-4">Profile</a>
            </div>
            <div class="p-2 rounded-lg border-none cursor-pointer select-none text-red-500 flex items-center space-x-2 bg-stone-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
                <a href="{% url 'logout' %}" class="text-lg  font-medium underline-offset-4">Logout</a>
            </div>
            
        </div>
    </div>
</div>
<div class="w-9/12 h-full">
    {% block dashboard %}
    
    {% endblock dashboard %}
</div>
</main>
{% endblock content %}


{% block js %}


<script>
const socket = new WebSocket('ws://'+window.location.host+'/ws/notifications/');

// Event listener for WebSocket connection established
socket.addEventListener('open', function (event) {
    console.log('WebSocket connection established');
});

// Event listener for WebSocket connection closed
socket.addEventListener('close', function (event) {
    console.log('WebSocket connection closed');
});

// Event listener for WebSocket errors
socket.addEventListener('error', function (event) {
    console.error('WebSocket error:', event);
});

// Event listener for incoming messages from the WebSocket server
socket.addEventListener('message', function (event) {
    const data = JSON.parse(event.data);
    console.log('Received message from server:', data);
    // Handle the incoming message data as needed
});

// Example function to send a message to the WebSocket server
function sendMessage(message) {
    socket.send(JSON.stringify(message));
}
</script>


{% endblock js %}